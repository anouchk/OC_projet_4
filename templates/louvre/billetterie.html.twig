{% extends 'base.html.twig' %}

{% form_theme formCommande  'bootstrap_4_layout.html.twig' %}

{# {% form_theme formCommande _self %} #}

{% block body %}

    <h1>
    	{# {% if modifyMode %}
     		Modifier votre commande
     	{% else %} #}
     		Réserver vos billets pour le musée
     	{# {% endif %} #}
    </h1>

    {{ form_start(formCommande, {'attr': {'novalidate': 'novalidate'}}) }}

    {{ form_row(formCommande.dateVisite) }}

    <button type="submit" class="btn btn-success">
     	{# {% if modifyMode %}
     		Enregistrer la modification de la commande
     	{% else %} #}
     	Réserver
     	{# {% endif %} #}
     </button>

    {{ form_end(formCommande) }}

{% endblock %}

{% block _ad_billets_widget %} 
	<p> Billet i </p>

{{ form_widget(form)}}

<div class="form-group">
	<button type="button" id=ad-billet class="btn btn-primary">Ajouter un billet</button>
</div>

{% endblock %}

{% block _ad_billets_entry_row %}
	{{ form_widget(form) }}
{% endblock %}

{% block _ad_billets_entry_widget %}
	<div class="form-group" id="block_{{id}}">
		<div class="row">
			{{form_widget(form.nom)}}			
		</div>
		<div class="row">
			{{form_widget(form.prenom)}}			
		</div>
		<div class="row">
			{{form_widget(form.typeBillet)}}			
		</div>
		<div class="row">
			{{form_widget(form.pays)}}			
		</div>
		<div class="row">
			{{form_widget(form.dateNaissance)}}			
		</div>
		<div class="row">
			{{form_widget(form.tarifRéduit)}}			
		</div>
		<div>
			<button type="button" data-action="delete" data-target="#block_{{id}}" class="btn btn-danger">Supprimer ce billet</button>
		</div>
	</div>
{% endblock %}

{% block javascripts %}
<script type="text/javascript">
	$('#commande_billets').click(function(){
		// Jerécupère le numéro des futurs champs que je vais créer
		const index = $('#commande_billets div.form-group').length;

		// Je récupère le prototype des entrées
		const tmpl = $('#commande_billets').data('prototype').replace(/_name_/g, index);

		// J'injecte ce code au sein de la div
		$('#ad_images').append(tmpl);
	});
</script>

{% endblock %}